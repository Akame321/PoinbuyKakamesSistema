<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Point Buy - Caminho dos Imortais</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            min-height: 100vh;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            color: #ffd700;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            text-align: center;
            margin-bottom: 30px;
            opacity: 0.9;
            font-style: italic;
        }

        .race-selection {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .race-selection h3 {
            margin-top: 0;
            color: #ffd700;
        }

        select {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 16px;
        }

        .points-display {
            text-align: center;
            font-size: 1.5em;
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .points-remaining {
            color: #90EE90;
        }

        .points-over {
            color: #FF6B6B;
        }

        .attributes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .attribute-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .attribute-name {
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffd700;
            font-size: 1.1em;
        }

        .attribute-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }

        .attr-button {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            background: #ffd700;
            color: #333;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .attr-button:hover:not(:disabled) {
            background: #ffed4e;
            transform: scale(1.1);
        }

        .attr-button:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
        }

        .attr-value {
            font-size: 24px;
            font-weight: bold;
            min-width: 40px;
        }

        .attr-final {
            margin-top: 10px;
            font-size: 18px;
            color: #90EE90;
        }

        .attr-cost {
            margin-top: 5px;
            font-size: 14px;
            opacity: 0.8;
        }

        .cost-table {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
        }

        .cost-table h3 {
            color: #ffd700;
            margin-top: 0;
        }

        .racial-bonus-display {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #ffd700;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            font-weight: bold;
            color: #ffd700;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #ffd700;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 8px 12px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        th {
            background: rgba(255, 255, 255, 0.2);
            color: #ffd700;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öîÔ∏è Calculadora Point Buy ‚öîÔ∏è</h1>
        <p class="subtitle">Caminho dos Imortais - Sistema de Cultivo</p>

        <div class="race-selection">
            <h3>üèÆ Selecione sua Ra√ßa</h3>
            <select id="raceSelect" onchange="updateRace()">
                <option value="none">Selecione uma ra√ßa...</option>
                <option value="human">Humano (+2 qualquer, +1 qualquer)</option>
                <option value="beast">Ra√ßa Bestial (+2 FOR, +1 CON)</option>
                <option value="demon">Meio-Sangue Dem√¥nio (+2 MIS, +1 FOR)</option>
                <option value="elf">Elfo (+2 ESP, +1 INT)</option>
            </select>
        </div>

        <div id="racialBonuses" class="race-selection" style="display: none;">
            <h3>üéØ B√¥nus Raciais (Aplicados no Final)</h3>
            <p><em>Estes b√¥nus s√£o aplicados diretamente no valor final, sem custar pontos de point buy</em></p>
            
            <div id="humanBonusControls" style="display: none;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                    <div>
                        <label>B√¥nus +2:</label>
                        <select id="humanFirst" onchange="updateHumanBonuses()">
                            <option value="">Escolha...</option>
                            <option value="for">For√ßa</option>
                            <option value="des">Destreza</option>
                            <option value="con">Constitui√ß√£o</option>
                            <option value="int">Intelig√™ncia</option>
                            <option value="esp">For√ßa Espiritual</option>
                            <option value="mis">Poder M√≠stico</option>
                        </select>
                    </div>
                    <div>
                        <label>B√¥nus +1:</label>
                        <select id="humanSecond" onchange="updateHumanBonuses()">
                            <option value="">Escolha...</option>
                            <option value="for">For√ßa</option>
                            <option value="des">Destreza</option>
                            <option value="con">Constitui√ß√£o</option>
                            <option value="int">Intelig√™ncia</option>
                            <option value="esp">For√ßa Espiritual</option>
                            <option value="mis">Poder M√≠stico</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="fixedBonusControls" style="display: none;">
                <p id="fixedBonusText"></p>
                <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; margin-top: 15px;">
                    <div style="text-align: center;">
                        <div style="font-size: 12px; margin-bottom: 5px;">FOR</div>
                        <div class="racial-bonus-display" id="racial-for">+0</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 12px; margin-bottom: 5px;">DES</div>
                        <div class="racial-bonus-display" id="racial-des">+0</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 12px; margin-bottom: 5px;">CON</div>
                        <div class="racial-bonus-display" id="racial-con">+0</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 12px; margin-bottom: 5px;">INT</div>
                        <div class="racial-bonus-display" id="racial-int">+0</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 12px; margin-bottom: 5px;">ESP</div>
                        <div class="racial-bonus-display" id="racial-esp">+0</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 12px; margin-bottom: 5px;">MIS</div>
                        <div class="racial-bonus-display" id="racial-mis">+0</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="points-display">
            <span id="pointsDisplay" class="points-remaining">Pontos Restantes: 27</span>
        </div>

        <div class="attributes-grid">
            <div class="attribute-card">
                <div class="attribute-name">üí™ FOR√áA (FOR)</div>
                <div class="attribute-controls">
                    <button class="attr-button" onclick="changeAttribute('for', -1)">-</button>
                    <span class="attr-value" id="for-value">8</span>
                    <button class="attr-button" onclick="changeAttribute('for', 1)">+</button>
                </div>
                <div class="attr-final" id="for-final">Final: 8</div>
                <div class="attr-cost" id="for-cost">Custo: 0</div>
            </div>

            <div class="attribute-card">
                <div class="attribute-name">üèÉ DESTREZA (DES)</div>
                <div class="attribute-controls">
                    <button class="attr-button" onclick="changeAttribute('des', -1)">-</button>
                    <span class="attr-value" id="des-value">8</span>
                    <button class="attr-button" onclick="changeAttribute('des', 1)">+</button>
                </div>
                <div class="attr-final" id="des-final">Final: 8</div>
                <div class="attr-cost" id="des-cost">Custo: 0</div>
            </div>

            <div class="attribute-card">
                <div class="attribute-name">üõ°Ô∏è CONSTITUI√á√ÉO (CON)</div>
                <div class="attribute-controls">
                    <button class="attr-button" onclick="changeAttribute('con', -1)">-</button>
                    <span class="attr-value" id="con-value">8</span>
                    <button class="attr-button" onclick="changeAttribute('con', 1)">+</button>
                </div>
                <div class="attr-final" id="con-final">Final: 8</div>
                <div class="attr-cost" id="con-cost">Custo: 0</div>
            </div>

            <div class="attribute-card">
                <div class="attribute-name">üß† INTELIG√äNCIA (INT)</div>
                <div class="attribute-controls">
                    <button class="attr-button" onclick="changeAttribute('int', -1)">-</button>
                    <span class="attr-value" id="int-value">8</span>
                    <button class="attr-button" onclick="changeAttribute('int', 1)">+</button>
                </div>
                <div class="attr-final" id="int-final">Final: 8</div>
                <div class="attr-cost" id="int-cost">Custo: 0</div>
            </div>

            <div class="attribute-card">
                <div class="attribute-name">üßò FOR√áA ESPIRITUAL (ESP)</div>
                <div class="attribute-controls">
                    <button class="attr-button" onclick="changeAttribute('esp', -1)">-</button>
                    <span class="attr-value" id="esp-value">8</span>
                    <button class="attr-button" onclick="changeAttribute('esp', 1)">+</button>
                </div>
                <div class="attr-final" id="esp-final">Final: 8</div>
                <div class="attr-cost" id="esp-cost">Custo: 0</div>
            </div>

            <div class="attribute-card">
                <div class="attribute-name">‚ú® PODER M√çSTICO (MIS)</div>
                <div class="attribute-controls">
                    <button class="attr-button" onclick="changeAttribute('mis', -1)">-</button>
                    <span class="attr-value" id="mis-value">8</span>
                    <button class="attr-button" onclick="changeAttribute('mis', 1)">+</button>
                </div>
                <div class="attr-final" id="mis-final">Final: 8</div>
                <div class="attr-cost" id="mis-cost">Custo: 0</div>
            </div>
        </div>

        <div class="cost-table">
            <h3>üìä Como Funciona</h3>
            <p><strong>Regras:</strong></p>
            <ul style="text-align: left; margin: 10px 0;">
                <li>Todos os atributos come√ßam em <strong>8</strong></li>
                <li>Voc√™ tem <strong>27 pontos</strong> para distribuir</li>
                <li>M√°ximo <strong>15</strong> antes dos b√¥nus raciais</li>
                <li>8‚Üí13 custa 1 ponto por n√≠vel</li>
                <li>14 e 15 custam 2 pontos cada</li>
            </ul>
            
            <h4>Custo Total por Valor:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Valor</th>
                        <th>8</th>
                        <th>9</th>
                        <th>10</th>
                        <th>11</th>
                        <th>12</th>
                        <th>13</th>
                        <th>14</th>
                        <th>15</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Custo</strong></td>
                        <td>0</td>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>7</td>
                        <td>9</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        const attributes = {
            for: 8, des: 8, con: 8, int: 8, esp: 8, mis: 8
        };

        const racialBonuses = {
            for: 0, des: 0, con: 0, int: 0, esp: 0, mis: 0
        };

        const raceDefaults = {
            none: {},
            human: { choosable: true },
            beast: { for: 2, con: 1 },
            demon: { mis: 2, for: 1 },
            elf: { esp: 2, int: 1 }
        };

        // Custos TOTAIS para chegar no valor a partir de 8
        const totalCosts = {
            8: 0, 9: 1, 10: 2, 11: 3, 12: 4, 13: 5, 14: 7, 15: 9
        };

        let currentRace = 'none';

        function getPointsToIncrease(value) {
            return totalCosts[value] || 0;
        }

        function getTotalPointsUsed() {
            return Object.values(attributes).reduce((total, value) => {
                return total + getPointsToIncrease(value);
            }, 0);
        }

        function updateDisplay() {
            const pointsUsed = getTotalPointsUsed();
            const pointsRemaining = 27 - pointsUsed;
            
            const pointsDisplay = document.getElementById('pointsDisplay');
            pointsDisplay.textContent = `Pontos Restantes: ${pointsRemaining}`;
            
            if (pointsRemaining < 0) {
                pointsDisplay.className = 'points-over';
            } else {
                pointsDisplay.className = 'points-remaining';
            }

            // Update each attribute display
            Object.keys(attributes).forEach(attr => {
                const baseValue = attributes[attr];
                const racialBonus = racialBonuses[attr];
                const cost = getPointsToIncrease(baseValue);
                const finalValue = baseValue + racialBonus;

                document.getElementById(`${attr}-value`).textContent = baseValue;
                document.getElementById(`${attr}-cost`).textContent = `Custo: ${cost}`;
                document.getElementById(`${attr}-final`).textContent = `Final: ${finalValue}`;
                
                // Update button states
                const minusBtn = document.querySelector(`button[onclick="changeAttribute('${attr}', -1)"]`);
                const plusBtn = document.querySelector(`button[onclick="changeAttribute('${attr}', 1)"]`);
                
                minusBtn.disabled = baseValue <= 8;
                
                // Check if we can afford the next increase
                const nextValue = baseValue + 1;
                const nextTotalCost = totalCosts[nextValue] || 999;
                const currentCost = totalCosts[baseValue] || 0;
                const increaseCost = nextTotalCost - currentCost;
                
                plusBtn.disabled = baseValue >= 15 || pointsRemaining < increaseCost;
            });

            // Update racial bonus displays
            Object.keys(racialBonuses).forEach(attr => {
                const bonus = racialBonuses[attr];
                const display = document.getElementById(`racial-${attr}`);
                if (display) {
                    display.textContent = `+${bonus}`;
                }
            });
        }

        function getRacialBonus(attr) {
            return racialBonuses[attr] || 0;
        }

        function changeAttribute(attr, delta) {
            const newValue = attributes[attr] + delta;
            if (newValue >= 8 && newValue <= 15) {
                attributes[attr] = newValue;
                updateDisplay();
            }
        }

        function updateRace() {
            const select = document.getElementById('raceSelect');
            currentRace = select.value;
            
            // Reset all racial bonuses
            Object.keys(racialBonuses).forEach(attr => {
                racialBonuses[attr] = 0;
            });
            
            const racialSection = document.getElementById('racialBonuses');
            const humanControls = document.getElementById('humanBonusControls');
            const fixedControls = document.getElementById('fixedBonusControls');
            
            if (currentRace === 'none') {
                racialSection.style.display = 'none';
            } else {
                racialSection.style.display = 'block';
                
                if (currentRace === 'human') {
                    humanControls.style.display = 'block';
                    fixedControls.style.display = 'none';
                } else {
                    humanControls.style.display = 'none';
                    fixedControls.style.display = 'block';
                    
                    // Apply fixed racial bonuses
                    const raceData = raceDefaults[currentRace];
                    Object.keys(raceData).forEach(attr => {
                        if (attr !== 'choosable') {
                            racialBonuses[attr] = raceData[attr];
                        }
                    });
                    
                    // Update fixed bonus text
                    const fixedText = document.getElementById('fixedBonusText');
                    let bonusText = '';
                    Object.keys(raceData).forEach(attr => {
                        if (attr !== 'choosable') {
                            const attrName = {
                                for: 'For√ßa', des: 'Destreza', con: 'Constitui√ß√£o',
                                int: 'Intelig√™ncia', esp: 'For√ßa Espiritual', mis: 'Poder M√≠stico'
                            }[attr];
                            bonusText += `+${raceData[attr]} ${attrName} `;
                        }
                    });
                    fixedText.textContent = bonusText;
                }
            }
            
            updateDisplay();
        }

        function updateHumanBonuses() {
            if (currentRace !== 'human') return;
            
            // Reset human bonuses
            Object.keys(racialBonuses).forEach(attr => {
                racialBonuses[attr] = 0;
            });
            
            const firstChoice = document.getElementById('humanFirst').value;
            const secondChoice = document.getElementById('humanSecond').value;
            
            if (firstChoice && firstChoice !== secondChoice) {
                racialBonuses[firstChoice] = 2;
            }
            
            if (secondChoice && secondChoice !== firstChoice) {
                racialBonuses[secondChoice] = 1;
            }
            
            // Update second dropdown options to exclude first choice
            const secondSelect = document.getElementById('humanSecond');
            const secondOptions = secondSelect.querySelectorAll('option');
            secondOptions.forEach(option => {
                if (option.value === firstChoice) {
                    option.style.display = 'none';
                } else {
                    option.style.display = 'block';
                }
            });
            
            updateDisplay();
        }

        // Initialize display
        updateDisplay();
    </script>
</body>
</html>